(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{144:function(e,t,a){"use strict";var n=a(3),i=a.n(n),r=a(4),s=a.n(r),o=a(5),c=a.n(o),l=a(6),u=a.n(l),d=a(13),m=a.n(d),g=a(7),p=a.n(g),h=a(1),_=a(22),f=a(8),k=a.n(f),v=function(e){function t(e){var a;return i()(this,t),(a=c()(this,u()(t).call(this,e))).formFieldRef=Object(h.createRef)(),a.checkboxRef=Object(h.createRef)(),a}return p()(t,e),s()(t,[{key:"componentDidMount",value:function(){new _.e(this.formFieldRef.current).input=new _.c(this.checkboxRef.current)}},{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.id,n=e.name,i=e.value,r=e.checked,s=e.disabled,o=e.children;return React.createElement("div",{className:"mdc-form-field",ref:this.formFieldRef},React.createElement("div",{className:"\n\t\t\t\t\t\tmdc-checkbox\n\t\t\t\t\t\t".concat(s?"mdc-checkbox--disabled":"","\n\t\t\t\t\t"),ref:this.checkboxRef},React.createElement("input",{className:"mdc-checkbox__native-control",type:"checkbox",id:a,name:n,value:i,checked:r,disabled:s,onChange:t}),React.createElement("div",{className:"mdc-checkbox__background"},React.createElement("svg",{className:"mdc-checkbox__checkmark",viewBox:"0 0 24 24"},React.createElement("path",{className:"mdc-checkbox__checkmark-path",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"})),React.createElement("div",{className:"mdc-checkbox__mixedmark"}))),React.createElement("label",{htmlFor:a},o))}}]),t}(h.Component);v.propTypes={onChange:k.a.func.isRequired,id:k.a.string.isRequired,name:k.a.string.isRequired,value:k.a.string.isRequired,checked:k.a.bool,disabled:k.a.bool,children:k.a.node.isRequired},v.defaultProps={checked:!1,disabled:!1};var R=v,y=a(35),b=a.n(y),E=a(0),C=function(e){function t(e){var a;return i()(this,t),(a=c()(this,u()(t).call(this,e))).state={scriptOnPage:!!window.googlesitekitTrackingEnabled,optIn:!!window.googlesitekitTrackingEnabled,error:!1},a.handleOptIn=a.handleOptIn.bind(m()(a)),a}return p()(t,e),s()(t,[{key:"handleOptIn",value:function(e){var t=this,a=e.target.checked,n={googlesitekit_tracking_optin:a};b()({path:"/wp/v2/settings",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(n),method:"POST"}).then((function(){if(window.googlesitekitTrackingEnabled=!!a,a&&!t.state.scriptOnPage){var e=window.document;if(!e)return;e.body.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t<script async src="https://www.googletagmanager.com/gtag/js?id='.concat(googlesitekit.admin.trackingID,'"><\/script>\n\t\t\t\t\t')),e.body.insertAdjacentHTML("beforeend","\n\t\t\t\t\t\t<script>\n\t\t\t\t\t\t\twindow.dataLayer = window.dataLayer || [];\n\t\t\t\t\t\t\tfunction gtag(){dataLayer.push(arguments);}\n\t\t\t\t\t\t\tgtag('js', new Date());\n\t\t\t\t\t\t\tgtag('config', '".concat(googlesitekit.admin.trackingID,"');\n\t\t\t\t\t\t<\/script>\n\t\t\t\t\t"))}t.setState({optIn:!!a,error:!1,scriptOnPage:!0})})).catch((function(a){t.setState({optIn:!e.target.checked,error:{errorCode:a.code,errorMsg:a.message}})}))}},{key:"render",value:function(){var e=this.state,t=e.optIn,a=e.error,n=this.props,i=n.id,r=n.name;return React.createElement("div",{className:"googlesitekit-opt-in"},React.createElement(R,{id:i,name:r,value:"1",checked:t,onChange:this.handleOptIn},Object(E.__)("Help us improve the Site Kit plugin by allowing tracking of anonymous usage stats. All data are treated in accordance with ","google-site-kit"),React.createElement("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer"},Object(E.__)("Google Privacy Policy","google-site-kit")),"."),a&&React.createElement("div",{className:"googlesitekit-error-text"},a.errorMsg))}}]),t}(h.Component);C.propTypes={id:k.a.string,name:k.a.string},C.defaultProps={id:"googlesitekit-opt-in",name:"optIn"};t.a=C},17:function(e,t,a){"use strict";var n=a(3),i=a.n(n),r=a(4),s=a.n(r),o=a(5),c=a.n(o),l=a(6),u=a.n(l),d=a(7),m=a.n(d),g=a(1),p=a(8),h=a.n(p),_=a(14),f=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.ctaLabel,n=e.ctaLink;return React.createElement("header",{className:"googlesitekit-layout__header"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},t&&React.createElement("div",{className:"\n\t\t\t\t\t\t\t\t\tmdc-layout-grid__cell\n\t\t\t\t\t\t\t\t\t".concat(n?"mdc-layout-grid__cell--span-6-desktop":"mdc-layout-grid__cell--span-12-desktop","\n\t\t\t\t\t\t\t\t\tmdc-layout-grid__cell--align-middle\n\t\t\t\t\t\t\t\t\t").concat(n?"":"mdc-layout-grid__cell--span-8-tablet","\n\t\t\t\t\t\t\t\t\tmdc-layout-grid__cell--span-4-phone\n\t\t\t\t\t\t\t\t")},React.createElement("h3",{className:"googlesitekit-subheading-1 googlesitekit-layout__header-title"},t)),n&&React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--align-right-tablet "},React.createElement(_.a,{href:n,external:!0,inherit:!0},a)))))}}]),t}(g.Component);f.propTypes={title:h.a.string,ctaLabel:h.a.string,ctaLink:h.a.string},f.defaultProps={title:"",ctaLabel:"",ctaLink:""};var k=f,v=a(60),R=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.ctaLabel,a=e.ctaLink,n=e.footerContent;return React.createElement("footer",{className:"googlesitekit-layout__footer"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:"mdc-layout-grid__cell mdc-layout-grid__cell--span-12"},a&&t&&React.createElement(v.a,{className:"googlesitekit-data-block__source",name:t,href:a,external:!0}),n))))}}]),t}(g.Component);R.propTypes={ctaLabel:h.a.string,ctaLink:h.a.string};var y=R,b=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.header,a=e.footer,n=e.children,i=e.title,r=e.headerCtaLabel,s=e.headerCtaLink,o=e.footerCtaLabel,c=e.footerCtaLink,l=e.footerContent,u=e.className,d=e.fill,m=e.relative;return React.createElement("div",{className:"\n\t\t\t\tgooglesitekit-layout\n\t\t\t\t".concat(u&&u,"\n\t\t\t\t").concat(d?"googlesitekit-layout--fill":"","\n\t\t\t\t").concat(m?"googlesitekit-layout--relative":"","\n\t\t\t")},t&&React.createElement(k,{title:i,ctaLabel:r,ctaLink:s}),n,a&&React.createElement(y,{ctaLabel:o,ctaLink:c,footerContent:l}))}}]),t}(g.Component);b.propTypes={header:h.a.bool,footer:h.a.bool,children:h.a.node.isRequired,title:h.a.string,headerCtaLabel:h.a.string,headerCtaLink:h.a.string,footerCtaLabel:h.a.string,footerCtaLink:h.a.string,footerContent:h.a.node,className:h.a.string,fill:h.a.bool,relative:h.a.bool},b.defaultProps={header:!1,footer:!1,title:"",headerCtaLabel:"",headerCtaLink:"",footerCtaLabel:"",footerCtaLink:"",footerContent:null,className:"",fill:!1,relative:!1};t.a=b},210:function(e,t,a){"use strict";a.r(t);var n=a(12),i=a.n(n),r=a(3),s=a.n(r),o=a(4),c=a.n(o),l=a(5),u=a.n(l),d=a(6),m=a.n(d),g=a(13),p=a.n(g),h=a(7),_=a.n(h),f=a(1),k=a(11),v=a(0),R=a(44),y=a(29),b=a(17),E=a(9),C=a(2),S=a(8),w=a.n(S),N=a(14),O=a(144),j=a(43),L=function(e){function t(){return s()(this,t),u()(this,m()(t).apply(this,arguments))}return _()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.connectURL,a=e.needReauthenticate,n=e.resetAndRestart;return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--two"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(v.__)("Authenticate with Google","google-site-kit")),React.createElement("p",null,Object(v.__)("Please sign into your Google account to begin.","google-site-kit")),a&&React.createElement("p",{className:"googlesitekit-error-text"},Object(v.__)("You did not grant access to one or more of the requested scopes. Please grant all scopes that you are prompted for.","google-site-kit")),React.createElement("p",null,React.createElement(y.a,{onClick:function(){Object(C.v)("plugin_setup","signin_with_google"),document.location=t}},Object(v.__)("Sign in with Google","google-site-kit")),n&&React.createElement(N.a,{className:"googlesitekit-wizard-step__back",onClick:n},Object(v.__)("Back","google-site-kit"))),React.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},React.createElement(O.a,null),React.createElement(j.a,null))))))}}]),t}(f.Component);L.propTypes={connectURL:w.a.string.isRequired,resetAndRestart:w.a.func};var x=L,M=a(68),A=a.n(M),U=a(31),P=a(22),z=function(e){function t(e){var a;s()(this,t);var n=(a=u()(this,m()(t).call(this,e))).props,i=n.isAuthenticated,r=n.shouldSetup;return a.state={loading:i&&r,loadingMsg:Object(v.__)("Getting your verified sites...","google-site-kit"),siteURL:" ",selectedURL:"",errorCode:!1,errorMsg:""},a.onProceed=a.onProceed.bind(p()(a)),a}return _()(t,e),c()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuthenticated,a=e.shouldSetup;t&&a&&this.requestSitePropertyList()}},{key:"requestSitePropertyList",value:function(){var e,t,a,n,r,s=this,o=this.props.setErrorMessage;i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,i.a.awrap(E.c.get(E.b,"site-verification","verification"));case 3:if(e=c.sent,t=e.verified,a=e.identifier,!t){c.next=16;break}return Object(C.v)("verification_setup","verification_check_true"),c.next=10,i.a.awrap(s.insertSiteVerification(a));case 10:if(!0!==c.sent.verified){c.next=14;break}return s.props.siteVerificationSetup(!0),c.abrupt("return",!0);case 14:c.next=17;break;case 16:Object(C.v)("verification_setup","verification_check_false");case 17:s.setState({loading:!1,siteURL:a}),c.next=26;break;case 20:c.prev=20,c.t0=c.catch(0),n=c.t0.message,Object(C.z)(c.t0.message)&&(r=JSON.parse(c.t0.message),n=r.error.message||c.t0.message),o(n),s.setState({loading:!1,errorCode:c.t0.code,errorMsg:n,siteURL:googlesitekit.admin.siteURL});case 26:case"end":return c.stop()}}),null,null,[[0,20]])}},{key:"insertSiteVerification",value:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(E.c.set(E.b,"site-verification","verification",{siteURL:e}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}},{key:"onProceed",value:function(){var e,t,a,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props.setErrorMessage,t=this.state.siteURL?this.state.siteURL:googlesitekit.admin.siteURL,e(""),this.setState({loading:!0,loadingMsg:Object(v.__)("Verifying...","google-site-kit"),errorCode:!1,errorMsg:""}),r.prev=4,r.next=7,i.a.awrap(this.insertSiteVerification(t));case 7:!0===r.sent.verified&&(Object(C.v)("verification_setup","verification_insert_tag"),this.props.siteVerificationSetup(!0)),r.next=17;break;case 11:r.prev=11,r.t0=r.catch(4),a=r.t0.message,Object(C.z)(r.t0.message)&&(n=JSON.parse(r.t0.message),a=n.error.message||r.t0.message),e(a),this.setState({loading:!1,errorCode:r.t0.code,errorMsg:a});case 17:case"end":return r.stop()}}),null,this,[[4,11]])}},{key:"renderForm",value:function(){var e=this.state,t=e.loading,a=e.loadingMsg,n=e.siteURL,i=React.createElement(f.Fragment,null,a&&React.createElement("p",null,a),React.createElement(U.a,null));return t?i:React.createElement(f.Fragment,null,React.createElement("div",{className:"googlesitekit-wizard-step__inputs"},React.createElement(P.l,{label:Object(v.__)("Website Address","google-site-kit"),name:"siteProperty",floatingLabelClassName:"mdc-floating-label--float-above",outlined:!0,disabled:!0},React.createElement(P.b,{value:n}))),React.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},React.createElement(y.a,{onClick:this.onProceed},Object(v.__)("Continue","google-site-kit")),React.createElement(j.a,null)))}},{key:"render",value:function(){var e=this.props,a=e.isAuthenticated,n=e.shouldSetup,i=this.state.errorMsg;return n?React.createElement(f.Fragment,null,React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(v.__)("Verify URL","google-site-kit")),React.createElement("p",{className:"googlesitekit-wizard-step__text"},Object(v.__)("We will need to verify your URL for Site Kit.","google-site-kit")),i&&0<i.length&&React.createElement("p",{className:"googlesitekit-error-text"},i),a&&this.renderForm()):t.renderSetupDone()}}],[{key:"renderSetupDone",value:function(){return React.createElement(f.Fragment,null,React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(v.__)("Verify URL","google-site-kit")),React.createElement("p",{className:"googlesitekit-wizard-step__text"},Object(v.__)("Congratulations, your site has been verified!","google-site-kit")))}}]),t}(f.Component);z.propTypes={isAuthenticated:w.a.bool.isRequired,shouldSetup:w.a.bool.isRequired,siteVerificationSetup:w.a.func.isRequired,completeSetup:w.a.func,setErrorMessage:w.a.func.isRequired};var D=z,q=function(e){function t(){return s()(this,t),u()(this,m()(t).apply(this,arguments))}return _()(t,e),c()(t,[{key:"render",value:function(){var e=!this.props.isVerified;return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--three"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement(D,A()({shouldSetup:e},this.props))))))}}]),t}(f.Component);q.propTypes={siteVerificationSetup:w.a.func.isRequired};var F=q,T=function(e){function t(e){var a;s()(this,t),a=u()(this,m()(t).call(this,e));var n=googlesitekit.admin.siteURL;return a.state={loading:!0,sites:!1,selectedURL:n,siteURL:n,connected:!1,errorCode:!1,errorMsg:""},a.handleURLSelect=a.handleURLSelect.bind(p()(a)),a.insertPropertyToSearchConsole=a.insertPropertyToSearchConsole.bind(p()(a)),a.submitPropertyEventHandler=a.submitPropertyEventHandler.bind(p()(a)),a}return _()(t,e),c()(t,[{key:"componentDidMount",value:function(){var e,t,a,n,r,s;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e=this.props,t=e.isAuthenticated,a=e.shouldSetup,t&&a){o.next=3;break}return o.abrupt("return");case 3:return o.prev=3,n=["siteRestrictedUser","siteOwner","siteFullUser"],o.next=7,i.a.awrap(E.c.get(E.b,"search-console","matched-sites"));case 7:if(r=o.sent,!(s=r.exactMatch)||!n.includes(s.permissionLevel)){o.next=13;break}return o.next=12,i.a.awrap(E.c.set(E.b,"search-console","site",{siteURL:s.siteURL}));case 12:return o.abrupt("return",this.props.searchConsoleSetup(s.siteURL));case 13:o.next=17;break;case 15:o.prev=15,o.t0=o.catch(3);case 17:this.requestSearchConsoleSiteList();case 18:case"end":return o.stop()}}),null,this,[[3,15]])}},{key:"requestSearchConsoleSiteList",value:function(){var e=this;if(!this.state.errorCode){var t,a,n,r,s=this.props.setErrorMessage;i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,i.a.awrap(E.c.get(E.b,"search-console","matched-sites"));case 3:if(t=o.sent,a=t.exactMatch,n=t.propertyMatches,!a){o.next=11;break}return o.next=9,i.a.awrap(e.insertPropertyToSearchConsole(a.siteURL));case 9:return e.props.searchConsoleSetup(a.siteURL),o.abrupt("return");case 11:r="",r=1<n.length?Object(v.sprintf)(
/* translators: %d: the number of matching properties. %s: URL of recommended site. */
Object(v.__)("We found %d existing accounts. We recommend using the account “%s”. Please confirm or change below to use.","google-site-kit"),n.length,n[0].siteURL):Object(v.__)("Your site has not been added to Search Console yet. Would you like to add it now?","google-site-kit"),s(r),e.setState({loading:!1,sites:n,errorCode:"no_property_matched",errorMsg:r}),o.next=21;break;case 17:o.prev=17,o.t0=o.catch(0),s(o.t0.message),e.setState({loading:!1,errorCode:o.t0.code,errorMsg:o.t0.message});case 21:case"end":return o.stop()}}),null,null,[[0,17]])}}},{key:"insertPropertyToSearchConsole",value:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(E.c.set(E.b,"search-console","site",{siteURL:e}));case 2:Object(C.v)("search_console_setup","add_new_sc_property"),this.setState({loading:!1,connected:!0});case 4:case"end":return t.stop()}}),null,this)}},{key:"submitPropertyEventHandler",value:function(){var e=this,t=this.state.selectedURL,a=this.props.setErrorMessage;i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(e.insertPropertyToSearchConsole(t));case 3:a(""),e.props.searchConsoleSetup(t),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),a(n.t0.message[0].message),e.setState({loading:!1,errorCode:n.t0.code,errorMsg:n.t0.message[0].message});case 11:case"end":return n.stop()}}),null,null,[[0,7]])}},{key:"handleURLSelect",value:function(e,t){this.setState({selectedURL:t.getAttribute("data-value")})}},{key:"matchedForm",value:function(){var e=this.state,t=e.sites,a=e.selectedURL,n=[{label:"",value:"",disabled:!0}];return t?(t.forEach((function(e){n.push({label:e,value:e})})),React.createElement(f.Fragment,null,React.createElement("div",{className:"googlesitekit-setup-module__inputs"},React.createElement(P.k,{enhanced:!0,name:"siteProperty",label:Object(v.__)("Choose URL","google-site-kit"),outlined:!0,onEnhancedChange:this.handleURLSelect,options:n,value:a})),React.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},React.createElement(y.a,{onClick:this.submitPropertyEventHandler},Object(v.__)("Continue","google-site-kit")),React.createElement(j.a,null)))):null}},{key:"noSiteForm",value:function(){var e=this.state.siteURL;return React.createElement(f.Fragment,null,React.createElement("div",{className:"googlesitekit-setup-module__inputs"},React.createElement(P.l,{label:Object(v.__)("Website Address","google-site-kit"),name:"siteProperty",floatingLabelClassName:"mdc-floating-label--float-above",outlined:!0,disabled:!0},React.createElement(P.b,{value:e}))),React.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},React.createElement(y.a,{onClick:this.submitPropertyEventHandler},Object(v.__)("Continue","google-site-kit")),React.createElement(j.a,null)))}},{key:"renderForm",value:function(){var e=this.state,t=e.loading,a=e.sites;return t?React.createElement(f.Fragment,null,React.createElement("p",null,Object(v.__)("We’re locating your Search Console account.","google-site-kit")),React.createElement(U.a,null)):0===a.length?this.noSiteForm():this.matchedForm()}},{key:"render",value:function(){var e=this.props,a=e.isAuthenticated,n=e.shouldSetup,i=this.state,r=i.errorMsg,s=i.connected;return!n||s?t.connected():React.createElement("section",{className:"googlesitekit-setup-module googlesitekit-setup-module--search-console"},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-setup-module__title "},Object(v._x)("Search Console","Service name","google-site-kit")),r&&0<r.length&&React.createElement("p",{className:"googlesitekit-error-text"},r),a&&n&&this.renderForm())}}],[{key:"connected",value:function(){return React.createElement("section",{className:"googlesitekit-setup-module googlesitekit-setup-module--search-console"},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-setup-module__title "},Object(v._x)("Search Console","Service name","google-site-kit")),React.createElement("p",{className:"googlesitekit-setup-module__text--no-margin"},Object(v.__)("Your Search Console is set up with Site Kit.","google-site-kit")))}}]),t}(f.Component);T.propTypes={isAuthenticated:w.a.bool.isRequired,shouldSetup:w.a.bool.isRequired,searchConsoleSetup:w.a.func.isRequired,setErrorMessage:w.a.func.isRequired};var V=T,I=function(e){function t(){return s()(this,t),u()(this,m()(t).apply(this,arguments))}return _()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.isVerified,a=e.hasSearchConsoleProperty,n=t&&!a;return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--four"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},n?React.createElement(V,A()({shouldSetup:n},this.props)):V.connected()))))}}]),t}(f.Component);I.propTypes={searchConsoleSetup:w.a.func.isRequired};var K=I,B=function(e){function t(e){var a;return s()(this,t),a=u()(this,m()(t).call(this,e)),googlesitekit.setup.hasSearchConsoleProperty?Object(C.v)("plugin_setup","user_verified"):Object(C.v)("plugin_setup","site_verified"),a}return _()(t,e),c()(t,[{key:"render",value:function(){return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--five"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--span-5-tablet mdc-layout-grid__cell--span-9-desktop "},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(v.__)("Congratulations!","google-site-kit")),React.createElement("p",null,Object(v.__)("You successfully completed the Site Kit setup and connected Search Console. Check the dashboard for more services to connect.","google-site-kit")),React.createElement("div",{className:"googlesitekit-wizard-step__action"},React.createElement(y.a,{id:"wizard-step-five-proceed",onClick:this.props.completeSetup},Object(v.__)("Go to Dashboard","google-site-kit")))),React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--span-3-tablet mdc-layout-grid__cell--span-3-desktop "},React.createElement("div",{className:"googlesitekit-rocket"},React.createElement("img",{className:"googlesitekit-rocket__body",alt:"",src:googlesitekit.admin.assetsRoot+"images/rocket-body.png"}),React.createElement("img",{className:"googlesitekit-rocket__clouds",alt:"",src:googlesitekit.admin.assetsRoot+"images/rocket-clouds.png"}),React.createElement("img",{className:"googlesitekit-rocket__dust",alt:"",src:googlesitekit.admin.assetsRoot+"images/rocket-dust.png"}))))))}}]),t}(f.Component);B.propTypes={completeSetup:w.a.func.isRequired};var G=B,H={authentication:{title:Object(v.__)("Authenticate","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&!e.needReauthenticate},Component:x},verification:{title:Object(v.__)("Verify URL","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified},Component:F},seachConsoleProperty:{title:Object(v.__)("Connect Search Console","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified&&e.hasSearchConsoleProperty},Component:K},completeSetup:{title:Object(v.__)("Finish","google-site-kit"),required:!1,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified&&e.hasSearchConsoleProperty},Component:G}},W=a(20),J=a(18),Y=a.n(J),Q=function(e){function t(){return s()(this,t),u()(this,m()(t).apply(this,arguments))}return _()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.currentStep,a=e.step,n=e.title,i=e.status,r=e.warning,s=e.error,o=e.stepKey,c=i;r?c="warning":s&&(c="error");var l=!1;switch(c){case"warning":case"error":l=Y.a.createElement(W.a,{id:"exclamation",height:"12",width:"2"});break;case"completed":l=Y.a.createElement(W.a,{id:"check",height:"12",width:"16"})}return Y.a.createElement("div",{className:"\n\t\t\t\tgooglesitekit-wizard-progress-step\n\t\t\t\tgooglesitekit-wizard-progress-step--".concat(a,"\n\t\t\t\t").concat(t?"googlesitekit-wizard-progress-step--current":"","\n\t\t\t\tgooglesitekit-wizard-progress-step--").concat(o,"\n\t\t\t")},Y.a.createElement("div",{className:"googlesitekit-wizard-progress-step__number-wrapper"},Y.a.createElement("div",{className:"\n\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number\n\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number--".concat(c,"\n\t\t\t\t\t")},Y.a.createElement("span",{className:"\n\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-text\n\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-text--".concat(c,"\n\t\t\t\t\t\t")},a),l&&Y.a.createElement("span",{className:"\n\t\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-icon\n\t\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-icon--".concat(c,"\n\t\t\t\t\t\t\t")},l))),Y.a.createElement("p",{className:"googlesitekit-wizard-progress-step__text"},n))}}]),t}(f.Component);Q.propTypes={currentStep:w.a.bool.isRequired,step:w.a.number.isRequired,title:w.a.string,status:w.a.string,warning:w.a.bool,error:w.a.bool},Q.defaultProps={title:"",status:"",warning:!1,error:!1,removeFirstStep:!1};var X=Q,Z=function(e){function t(e){var a;s()(this,t),a=u()(this,m()(t).call(this,e));var n=googlesitekit.admin.connectURL,i=googlesitekit.setup,r=i.isAuthenticated,o=i.hasSearchConsoleProperty,c=i.isSiteKitConnected,l=i.isVerified,d=i.needReauthenticate,g=googlesitekit.permissions.canSetup;return a.state={canSetup:g,isAuthenticated:r,isVerified:l,needReauthenticate:d,hasSearchConsoleProperty:o,hasSearchConsolePropertyFromTheStart:o,connectURL:n,errorMsg:"",isSiteKitConnected:c,completeSetup:!1},a.siteConnectedSetup=a.siteConnectedSetup.bind(p()(a)),a.siteVerificationSetup=a.siteVerificationSetup.bind(p()(a)),a.searchConsoleSetup=a.searchConsoleSetup.bind(p()(a)),a.resetAndRestart=a.resetAndRestart.bind(p()(a)),a.completeSetup=a.completeSetup.bind(p()(a)),a.setErrorMessage=a.setErrorMessage.bind(p()(a)),a}return _()(t,e),c()(t,[{key:"resetAndRestart",value:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(E.c.set(E.a,"site","reset"));case 2:Object(C.d)(),this.setState({isSiteKitConnected:!1,isAuthenticated:!1,isVerified:!1,hasSearchConsoleProperty:!1,completeSetup:!1,errorMsg:""});case 4:case"end":return e.stop()}}),null,this)}},{key:"completeSetup",value:function(){this.setState({completeSetup:!0})}},{key:"siteConnectedSetup",value:function(e){this.setState({isSiteKitConnected:e})}},{key:"siteVerificationSetup",value:function(e){this.setState({isVerified:e})}},{key:"searchConsoleSetup",value:function(e){this.setState({hasSearchConsoleProperty:e})}},{key:"isSetupFinished",value:function(){var e=this.state,t=e.isSiteKitConnected,a=e.isAuthenticated,n=e.isVerified,i=e.hasSearchConsoleProperty,r=e.completeSetup;return t&&a&&n&&i&&r}},{key:"setErrorMessage",value:function(e){this.setState({errorMsg:e})}},{key:"getApplicableSteps",value:function(){var e,t=H,a=Object.keys(t);for(e=0;e<a.length;e++)t[a[e]].isApplicable(this.state)||delete t[a[e]];return t}},{key:"currentStep",value:function(e){var t,a=Object.keys(e);for(t=0;t<a.length-1;t++)if(!e[a[t]].isCompleted(this.state))return a[t];return a[t]}},{key:"stepStatus",value:function(e,t){return e[t].isCompleted(this.state)?"completed":t===this.currentStep(e)?"inprogress":""}},{key:"render",value:function(){var e=this,t=this.state,a=t.canSetup,n=t.isAuthenticated,i=t.isVerified,r=t.needReauthenticate,s=t.hasSearchConsoleProperty,o=t.connectURL,c=t.isSiteKitConnected;if(this.isSetupFinished()){var l=Object(C.n)("googlesitekit-dashboard",{notification:"authentication_success"});Object(k.delay)((function(){window.location.replace(l)}),500,"later")}var u=this.getApplicableSteps(),d=this.currentStep(u),m=u[d].Component,g=React.createElement(m,{siteConnectedSetup:this.siteConnectedSetup,connectURL:o,siteVerificationSetup:this.siteVerificationSetup,searchConsoleSetup:this.searchConsoleSetup,completeSetup:this.completeSetup,isSiteKitConnected:c,isAuthenticated:n,isVerified:i,needReauthenticate:r,hasSearchConsoleProperty:s,setErrorMessage:this.setErrorMessage,resetAndRestart:u.clientCredentials?this.resetAndRestart:void 0}),p=a,h=!p&&!n;return React.createElement(f.Fragment,null,React.createElement(R.a,null),React.createElement("div",{className:"googlesitekit-wizard"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement(b.a,null,React.createElement("section",{className:"googlesitekit-wizard-progress"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},p&&React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("div",{className:"googlesitekit-wizard-progress__steps"},Object.keys(u).map((function(t,a){return React.createElement(X,{key:u[t].title,currentStep:d===t,title:u[t].title,step:a+1,status:e.stepStatus(u,t),warning:u[t].warning,error:u[t].error,stepKey:t})})))))),h&&React.createElement("div",{className:"googlesitekit-setup__footer"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("h1",{className:"googlesitekit-setup__title"},Object(v.__)("Authenticate Site Kit","google-site-kit")),React.createElement("p",{className:"googlesitekit-setup__description"},Object(v.__)("Please sign into your Google account to begin.","google-site-kit")),React.createElement(y.a,{href:"#",onClick:function(){Object(C.v)("plugin_setup","signin_with_google"),document.location=o}},Object(v.__)("Sign in with Google","google-site-kit"))))))),p&&g))))))}}]),t}(f.Component);t.default=Z},43:function(e,t,a){"use strict";a(1);var n=a(0),i=a(14);t.a=function(){var e=Object(n.__)("Need help?","google-site-kit");return React.createElement(i.a,{className:"googlesitekit-help-link",href:"https://sitekit.withgoogle.com/documentation/",external:!0},e)}},44:function(e,t,a){"use strict";var n=a(3),i=a.n(n),r=a(4),s=a.n(r),o=a(5),c=a.n(o),l=a(6),u=a.n(l),d=a(7),m=a.n(d),g=a(1),p=a(21),h=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){return null}}]),t}(g.Component),_=Object(p.a)("googlesitekit.ErrorNotification")(h),f=a(81),k=a(12),v=a.n(k),R=a(13),y=a.n(R),b=a(67),E=a(29),C=a(22),S=a(8),w=a.n(S),N=function(e){function t(e){var a;return i()(this,t),(a=c()(this,u()(t).call(this,e))).menuRef=Object(g.createRef)(),a}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){var e=this.props.menuOpen;this.menu=new C.f(this.menuRef.current),this.menu.open=e,this.menu.setDefaultFocusState(1)}},{key:"componentDidUpdate",value:function(e){var t=this.props.menuOpen;t!==e.menuOpen&&(this.menu.open=t)}},{key:"render",value:function(){var e=this.props,t=e.menuOpen,a=e.menuItems,n=e.onSelected,i=e.id;return React.createElement("div",{className:"mdc-menu mdc-menu-surface",ref:this.menuRef},React.createElement("ul",{id:i,className:"mdc-list",role:"menu","aria-hidden":!t,"aria-orientation":"vertical",tabIndex:"-1"},a.map((function(e,t){return React.createElement("li",{key:t,className:"mdc-list-item",role:"menuitem",onClick:n.bind(null,t),onKeyDown:n.bind(null,t)},React.createElement("span",{className:"mdc-list-item__text"},e))}))))}}]),t}(g.Component);N.propTypes={menuOpen:w.a.bool.isRequired,menuItems:w.a.array.isRequired,id:w.a.string.isRequired};var O=N,j=a(80),L=a(2),x=a(0),M=function(e){function t(e){var a;return i()(this,t),(a=c()(this,u()(t).call(this,e))).state={dialogActive:!1,menuOpen:!1},a.handleMenu=a.handleMenu.bind(y()(a)),a.handleMenuClose=a.handleMenuClose.bind(y()(a)),a.handleMenuItemSelect=a.handleMenuItemSelect.bind(y()(a)),a.handleDialog=a.handleDialog.bind(y()(a)),a.handleDialogClose=a.handleDialogClose.bind(y()(a)),a.handleUnlinkConfirm=a.handleUnlinkConfirm.bind(y()(a)),a.menuButtonRef=Object(g.createRef)(),a.menuRef=Object(g.createRef)(),a}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.handleMenuClose),window.addEventListener("keyup",this.handleMenuClose),window.addEventListener("keyup",this.handleDialogClose)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.handleMenuClose),window.removeEventListener("keyup",this.handleMenuClose),window.removeEventListener("keyup",this.handleDialogClose)}},{key:"handleMenu",value:function(){var e=this.state.menuOpen;this.setState({menuOpen:!e})}},{key:"handleMenuClose",value:function(e){("keyup"!==e.type||27!==e.keyCode)&&"mouseup"!==e.type||this.menuButtonRef.current.buttonRef.current.contains(e.target)||this.menuRef.current.menuRef.current.contains(e.target)||this.setState({menuOpen:!1})}},{key:"handleMenuItemSelect",value:function(e,t){var a=googlesitekit.admin.proxyPermissionsURL;if("keydown"===t.type&&(13===t.keyCode||32===t.keyCode)||"click"===t.type)switch(e){case 0:this.handleDialog();break;case 1:window.location.assign(a);break;default:this.handleMenu()}}},{key:"handleDialog",value:function(){this.setState((function(e){return{dialogActive:!e.dialogActive,menuOpen:!1}}))}},{key:"handleDialogClose",value:function(e){27===e.keyCode&&this.setState({dialogActive:!1,menuOpen:!1})}},{key:"handleUnlinkConfirm",value:function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({dialogActive:!1}),Object(L.d)(),document.location=Object(L.n)("googlesitekit-splash",{googlesitekit_context:"revoked"});case 3:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=googlesitekit.admin,t=e.userData,a=t.email,n=void 0===a?"":a,i=t.picture,r=void 0===i?"":i,s=e.proxyPermissionsURL,o=this.state,c=o.dialogActive,l=o.menuOpen;return React.createElement(g.Fragment,null,React.createElement("div",{className:"googlesitekit-dropdown-menu mdc-menu-surface--anchor"},React.createElement(E.a,{ref:this.menuButtonRef,className:"googlesitekit-header__dropdown mdc-button--dropdown",text:!0,onClick:this.handleMenu,icon:r?React.createElement("i",{className:"mdc-button__icon","aria-hidden":"true"},React.createElement("img",{className:"mdc-button__icon--image",src:r,alt:Object(x.__)("User Avatar","google-site-kit")})):void 0,ariaHaspopup:"menu",ariaExpanded:l,ariaControls:"user-menu"},n),React.createElement(O,{ref:this.menuRef,menuOpen:l,menuItems:[Object(x.__)("Disconnect","google-site-kit")].concat(s?[Object(x.__)("Manage sites...","google-site-kit")]:[]),onSelected:this.handleMenuItemSelect,id:"user-menu"})),React.createElement(j.a,null,React.createElement(b.a,{dialogActive:c,handleConfirm:this.handleUnlinkConfirm,handleDialog:this.handleDialog,title:Object(x.__)("Disconnect","google-site-kit"),subtitle:Object(x.__)("Disconnecting Site Kit by Google will remove your access to all services. After disconnecting, you will need to re-authorize to restore service.","google-site-kit"),confirmButton:Object(x.__)("Disconnect","google-site-kit"),provides:[]})))}}]),t}(g.Component),A=function(e){function t(){return i()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=googlesitekit.setup.isAuthenticated;return React.createElement(g.Fragment,null,React.createElement("header",{className:"googlesitekit-header"},React.createElement("section",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--span-3-phone mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-6-desktop "},React.createElement(f.a,null)),React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--align-right-phone mdc-layout-grid__cell--span-1-phone mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-6-desktop "},e&&React.createElement(M,null))))),React.createElement(_,null))}}]),t}(g.Component);t.a=A},67:function(e,t,a){"use strict";var n=a(3),i=a.n(n),r=a(4),s=a.n(r),o=a(5),c=a.n(o),l=a(6),u=a.n(l),d=a(7),m=a.n(d),g=a(1),p=a(8),h=a.n(p),_=a(29),f=a(14),k=a(22),v=a(145),R=a.n(v),y=a(0),b=function(e){function t(){var e;return i()(this,t),(e=c()(this,u()(t).call(this))).state={attributes:[Object(y.__)("Audience overview","google-site-kit"),Object(y.__)("Top pages","google-site-kit"),Object(y.__)("Top acquisition sources","google-site-kit"),Object(y.__)("AdSense & Analytics metrics for top pages","google-site-kit")]},e.dialogRef=Object(g.createRef)(),e}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){new k.d(this.dialogRef.current)}},{key:"render",value:function(){var e=this.props,t=e.dialogActive,a=e.handleDialog,n=e.title,i=e.provides,r=e.handleConfirm,s=e.subtitle,o=e.confirmButton,c=e.dependentModules;return React.createElement("div",{ref:this.dialogRef,className:"mdc-dialog ".concat(t?"mdc-dialog--open":""),role:"alertdialog","aria-modal":"true","aria-labelledby":"remove-module-dialog","aria-describedby":"remove-module-dialog-description","aria-hidden":t?"false":"true",tabIndex:"-1"},React.createElement("div",{className:"mdc-dialog__scrim"}," "),React.createElement(R.a,{active:t},React.createElement("div",null,React.createElement("div",{className:"mdc-dialog__container"},React.createElement("div",{className:"mdc-dialog__surface"},n&&React.createElement("h2",{id:"remove-module-dialog",className:"mdc-dialog__title"},n),s&&React.createElement("p",{className:"mdc-dialog__lead"},s),React.createElement("section",{id:"remove-module-dialog-description",className:"mdc-dialog__content"},React.createElement("ul",{className:"mdc-list mdc-list--underlined mdc-list--non-interactive"},i&&i.map((function(e){return React.createElement("li",{className:"mdc-list-item",key:e},React.createElement("span",{className:"mdc-list-item__text"},e))})))),c&&React.createElement("p",{className:"mdc-dialog__dependecies"},React.createElement("strong",null,Object(y.__)("Note: ","google-site-kit")),c),React.createElement("footer",{className:"mdc-dialog__actions"},React.createElement(_.a,{onClick:r,danger:!0},o||Object(y.__)("Disconnect","google-site-kit")),React.createElement(f.a,{className:"mdc-dialog__cancel-button",onClick:function(){return a()},inherit:!0},Object(y.__)("Cancel","google-site-kit"))))))))}}]),t}(g.Component);b.propTypes={dialogActive:h.a.bool,handleDialog:h.a.func,handleConfirm:h.a.func.isRequired,title:h.a.string,description:h.a.string,confirmButton:h.a.string},b.defaultProps={dialogActive:!1,handleDialog:null,title:null,description:null,confirmButton:null},t.a=b},80:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(3),i=a.n(n),r=a(4),s=a.n(r),o=a(5),c=a.n(o),l=a(6),u=a.n(l),d=a(7),m=a.n(d),g=a(1),p=function(e){function t(e){var a;return i()(this,t),(a=c()(this,u()(t).call(this,e))).el=document.createElement("div"),a.root=document.querySelector(".googlesitekit-plugin")||document.body,a}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){this.root.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.root.removeChild(this.el)}},{key:"render",value:function(){return Object(g.createPortal)(this.props.children,this.el)}}]),t}(g.Component)}}]);